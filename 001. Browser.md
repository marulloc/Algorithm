# Browser

<br>
<br>
<br>

### 브라우저의 기능

- 사용자가 지정한 자원을 서버에 요청하고 브라우저에 표시한다.
  - 자원의 위치는 *URI(Uniformed Resource Identifier)*에 의해 결정된다.
  - 보통 자원의 종류는 HTML 문서지만, PDF나 이미지 등 다른 형태인 경우도 있다.
- 브라우저는 HTML과 CSS를 해석하여 화면에 보여준다.

<br>
<br>
<br>

## 브라우저의 구성 요소

![](https://i.imgur.com/GQNaN7V.png)

- 사용자 인터페이스
  - 주소 표시줄, 이전/다음 버튼 등, 페이지를 보여주는 창을 제외한 브라우저의 모든 부분
- **브라우저 엔진**
  - 사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어
- **렌더링 엔진**
  - 요청한 콘텐츠를 표시하는 엔진이다. HTML과 CSS를 파싱하여 화면에 표시한다.
- 통신 부분
  - HTTP 요청과 같은 네트워크 호출에 사용된다.
- UI 백엔드
- 자바스크립트 해석기
  - 자바스크립트 코드 해석하고 실행
- 자료 저장소
  - 브라우저가 지원하는 웹 데이터 베이스. 쿠키와 같은 것이 저장된다.

> 크롬은 대부분 브라우저와 달리 각 탭마다 별도의 렌더링 엔진 인스턴스를 갖고 있다. 각 탭은 독립된 프로세스로 처리된다.

<br>
<br>
<br>

## 브라우저가 화면을 표시하는 순서

1. HTML을 로드한다.
2. HTML을 파싱해서 **DOM Tree**를 생성하기 시작한다.
3. HTML 파싱 중, Image, Video, CSS 등 HTML과 연결된 리소스들을 가져온 후, **CSSOM Tree**를 생성하기 시작한다.
4. DOM 트리와 CSSOM 트리를 합쳐서 **Render Tree**를 생성한다.
   - `<html>`과 같은 비시각적 요소는 렌더트리에 포함되지 않는다.
   - `display : none`의 경우 렌더트리에서 빠진다.
   - `position : fixed`와 같은 독립적인 노드들은 다른 루트의 트리를 가진다.(?다시 확인해야 함)
5. Render Tree **Layout** 단계(**플로우 단계**)를 시작한다.
   - Layout의 단어 뜻대로 실제로 "배치"를 하는 단계가 **아니다.** 요소가 어떤 스타일을 가져야 되는지에 대한 계산은 끝난 상태지만, **뷰포트 내에서 실제로 어디에 위치해야 하는지 확인하는 단계**다.
   - 즉, 노드가 어떤 모양과 크기를 가져야 하는지를 **계산**하는 단계다. 이때 `%`와 상대적인 값들은 모두 `px`단위로 변환된다.
6. 계산된 걸 토대로 실제 화면에 그리는 단계를 거친다.(**페인팅 단계**)
