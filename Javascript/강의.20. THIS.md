# This

- 하나의 키워드
- `obj.aa()` 형태로 호출한 함수(메소드) aa 에서 `this`로 인스턴스(오브젝트)를 참조할 수 있다.
- this는 실행 컨텍스트의 **This 바인딩 컴포넌트**에 바인딩된다. 따라서, 함수 내부에서 this 키워드로 obj를 참조할 수 있다.

<br>
<br>

### this와 Global Object

- 글로벌 오브젝트에서 this는 글로벌 오브젝트를 참조한다.
  - 글로벌 함수를 호출할 땐, 함수 앞에다가 글로벌 오브젝트를 써주지 않는데, 그건 묵시적으로 글로벌 오브젝트라고 간주하는 것이다.
- window Object는 JS에서 만든 것이 아니라, 글로벌 오브젝트의 스코프도 아니다. 그러나 window Object와 글로벌 오브젝트를 같은 선상에 두고 사용하곤 한다.
- 여기에는 **Host Object**개념이 적용된다.

  ```Javascript
  function test(){ return this }
  console.log(this === window) //=> true
  ```

  - 전역 함수의 this(Global Object)와 window가 동일

    <br>

  ```Javascript
  var value = 100;        // 전역변수
  console.log(this.value) //=> 100
  ```

  - 글로벌 Scope에서 this로 자기 자신을 참조
  - this가 글로벌 오브젝트를 참조하므로, this.value 형태로 글로벌 변수 사용이 가능하다.

    <br>

  ```Javascript
  var value = 100;
  console.log(window.value) //=> 100
  ```

  - window가 글로벌 오브젝트를 참조하므로, `window.value`형태로 글로벌 변수 사용이 가능하다.

    <br>

  ```Javascript
  this.value = 100;
  console.log(window.value) //=> 100
  ```

  - 현재 상태에서 this는 **Global Object**를 참조하므로 value는 Global Object에 설정된다.
  - window가 **Global Object**를 참조하므로 value를 사용할 수 있다.

  #### window 오브젝트처럼, 다른 오브젝트를 마치 내것처럼 사용하는 개념을 Host Object라고 한다. "DOM 오브젝트" 또한 Host Object다.

  > window와 전역 컨텍스트에서 참조하는 this가 똑같기 때문에, 종종 Global Object가 Window라고 하곤 한다. 그러나 실체는 다르다는 것을 알고 있어야 한다.

<br>
<br>

### this와 window Object

#### this가 window를 참조하는 경우

```Javascript
window.onload = function(){
    console.log(this === window) //=> true
}
```

- true가 출력된 것은 값과 타입이 같다는 것을 의미한다.
- this가 window를 참조하게 된 것은, `onload()`가 비록 이벤트를 처리하는 핸들러 함수라도, function Object다.
- onload 이벤트가 발생하면, 실행 컨텍스트를 만들게 되고, `onload`앞에 작성된 window를 **this 바인딩 컴포넌트**에 바인딩하게 된다.

<br>

#### this로 지역변수 사용하는 경우

```Javascript
window.onload = function(){
    var value = 100
    console.log(this.value) //=> undefined
}
```

- 변수 `value`는 핸들러 함수의 지역변수다.
- this는 window object를 참조하게 되므로, this.value로 지역변수에 접근할 수 없다.

함수 앞에 작성된 Object를 함수 안에서 this로 참조할 수 있다.

<br>
<br>

### 내 정리

#### bind와 call 함수 차이

```Javascript
function getPoint(param){
    console.log(param, this.point)
}

var obj1 = {point:10}
var obj2 = {point:100000}

getPoint.call(obj1, "첫번째")
getPoint.call(obj2, "두번째")
```

#### 전역의 this

```Javascript
point = 100
function get(){
    console.log(this.point)
}

var obj2 = {
    point : 7777,
    get(){
        console.log(this.point)
    }
}

get()       //=> 100
obj2.get()  //=> 7777
```
